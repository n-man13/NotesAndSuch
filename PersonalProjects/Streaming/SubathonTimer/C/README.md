# ‚è≥ Twitch Subathon Timer (C Implementation)

A lightweight, high-performance Subathon Timer written in C. It connects directly to Twitch Chat via IRC (SSL/TLS), listens for subscription events, and updates a text file for use in OBS/Streamlabs.

## ‚ú® Features

*   **Real-time Twitch Integration:** Connects securely using OpenSSL.
*   **Auto-Extension:** Automatically adds time for:
    *   New Subscribers
    *   Re-Subscribers
    *   Gifted Subs
*   **OBS Compatible:** output to `timer.txt` for easy on-stream display.
*   **Configurable:** Customize start time and seconds-per-sub via a simple text file.
*   **Low Resource Usage:** Efficient C implementation.

---

## üõ†Ô∏è Prerequisites

You need a C compiler (`gcc`) and the OpenSSL development libraries.

### **Linux (Ubuntu/Debian/WSL)**
```bash
sudo apt update
sudo apt install build-essential libssl-dev
```

### **macOS**
```bash
brew install openssl
# You may need to adjust the Makefile to point to the brew openssl path
```

### **Windows**
*   Use **WSL2 (Ubuntu)** for the easiest experience (follow Linux instructions).
*   Or use **MinGW-w64** with OpenSSL libraries installed.

---

## üöÄ Installation & Usage

1.  **Compile the Project**
    ```bash
    make
    ```

2.  **Configure**
    Open `config.txt` and fill in your details:
    *   **OAUTH_TOKEN**: Get this from [twitchapps.com/tmi/](https://twitchapps.com/tmi/) (starts with `oauth:...`)
    *   **BOT_USERNAME**: Your Twitch username (lowercase)
    *   **CHANNEL**: The channel you want to monitor (lowercase)
    *   **MIN_SECONDS_ADD**: Minimum seconds to add per sub.
    *   **MAX_SECONDS_ADD**: Maximum seconds to add per sub.
    *   **INITIAL_MINUTES**: Starting time (in minutes).
    *   **REWARD_ID**: The UUID of the channel point reward.
    *   **MIN/MAX_SECONDS_REDEEM**: Range of time to add for that reward.

    *Example `config.txt`:*
    ```ini
    OAUTH_TOKEN=oauth:abc123456789xyz
    BOT_USERNAME=my_bot_account
    CHANNEL=my_main_channel
    MIN_SECONDS_ADD=300
    MAX_SECONDS_ADD=600
    INITIAL_MINUTES=60
    REWARD_ID=e7c12345-6789-12ab-cdef-0123456789ab
    MIN_SECONDS_REDEEM=60
    MAX_SECONDS_REDEEM=120
    ```

3.  **Run**
    ```bash
    ./subathon_timer
    ```
    The program will connect to Twitch and start counting down.

---

## üé• OBS Setup

1.  Open OBS Studio.
2.  Add a **Text (GDI+)** (Windows) or **Text (FreeType 2)** (Linux/Mac) source.
3.  Check the box **"Read from file"**.
4.  Click **Browse** and select the `timer.txt` file generated by this program.
5.  Customize the font and color to match your overlay!

---

## üèóÔ∏è Project Structure

*   `main.c`: Core loop and logic coordination.
*   `twitch_irc.c`: Handles SSL connection and IRC protocol parsing.
*   `timer.c`: Countdown logic and time formatting.
*   `config.c`: Simple configuration file parser.
*   `file_io.c`: Writes the current time to `timer.txt`.

## üìù License

MIT License - Free to use and modify for your stream!
